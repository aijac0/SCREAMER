Saturn Fast Marx Test Bed
!
! Rick Spielman 2018-10-20
!
Time-step 4.0e-12
Resolution-time 100e-12
End-time 1.0e-6
Number-prints 5
Execute-cycles all
Grids no
Echo-setup no
Max-points 5001
!
!Start circuit definition
!
!Saturn_FM_rev2.txt is based on Saturn_FM_rev1.txt. We are adding L2 prepulse switches.
!
! Gas switch dimensions from drawings
!
! We have a sub Marx with 40 cap pairs in series and 20 switches. Vch = 3.4 MV
! Each cap pair is 2, 145 nF caps in parallel - 290 nF. Sub-Marx capacitance - 7.25 nF
! We have 2 sub Marxes in parallel.
! The total Marx capacitance is 14.5 nF.
! Include 130 m½ individual cap ESR or 65 m½ per pair of caps in parallel
!   X 40 stages per sub-Marx = 2.6 ½ per sub-Marx, 1.3 ½ per Marx.
!
! Assume that there will be 167 nH every stage. The sub-Marx L = 167 nH * 20 = 3.34 µH.
! The total Marx inductance (caps/headers) would be 3.34 µH/2 = 1.67 µH
! The total switch inductance is assumed to be 400 nH/sub-Marx. (20 nH per stage)
!
! Energy per sub-Marx at +/-85kV kV = 41.9 kJ, X2 = 83.8 kJ
!
! The matched impedance of a sub-Marx = sqrt(L/C) = 21.5 ½.
!   The total Marx impedance is 21.5 ½/2 = 10.3 ½
!   Note L1 impedance is 4 ½.
!   The ESR amounts to ~ 12% of the matched impedance.
!
! The switch model will have 20x the length of one switch per sub Marx and then will
! have 2 arc channels (2 sub Marxes) in parallel. 
! 
! We will assume a TOTAL inductance of 1.77 µH (1.67 µH + 0.1 µH)for one Marx and one L1.
! This inductance is needed to get the required rise time of the voltage on the CPL.
!
! L1 capacitance used is 42.85 nF. This is distributed in a TL that is ~60 ns long and
!   has a constant impedance of 2 ½. (C = t/Z = 20/2 nF = 10 nF)
!
! 
! Main Branch - Branch #1
!
BRANCH
!
! Marx capacitance and charge voltage
! CX2 for two sub-Marxes (7.25 nF each) = 14.5 nF
! +/-85 kV charge
!
RCGround 1e+12 14.5e-9
Initial VC1 3.4e6

UFO VC1
$V_marx
UFO EC1
$E_marx

!
! Cap inductance, case & parasitic inductance, and ESR
! ESR = 1.3 ½ for the total Marx (2.6 ½ sub Marx/2)
!

RLSeries 1.3 1.67e-6

!
! Switch resistance - Martin Model and switch inductance - the total gap for both sides of a single
!   switch from DWGs is 0.53Ó (1.3462 cm) gap and 93 psig air X20 = 26.924 cm
!
! Initial switch resistance was chosen to be higher than that printed in the first
! few time steps so as to appear monotonically decreasing in R plots
! A careful few runs showed that 10 G½ looked best. In any event by 1 ns all of the 
! resistance values are the same.
! Switch inductance of one sub-Marx = 400 nH, 2 sub-Marxes
! 

RLSeries 10e9 100e-9
Var R2 Switch
!dielectric switchtime gap          pressure     nswitch  nchannels
AIR           0.0               0.26924  7.3                1             2

UFO IR2
$I_marx
UFO R2
$R_switch
UFO ER2
$E_switch
UFO QR2
$Q_switch

!
! Output Marx header inductance 100 nH not parallelled (WAG)
!

RLSeries 0.00 100e-9

!
! Line 1 , 20 ns, 2 ½; 20 ns/2= 10 nF
! Include the radius transition of the L1 
!

TRLine EXP 1.0e-09  16  2.0
TRLine LIN  18.0e-09   2.0 2.0
TRLine EXP 1.0e-09 2.0  16

UFO VOUT
$V_L1_out
UFO IOUT
$I_L1_out
UFO EOUT
$E_L1_out
UFO POUT
$P_L1_out

!
! L1 water switches
! 5 output switches, 3.25Ó gap + switch inductance
! actual DE gap is 3.5" with suggestions that 3.25" would be better
!

RLSeries 10e9 10e-9
Var R2 Switch
!dielectric switchtime gap         pressure   nswitch  nchannels
H2O          310e-09     0.08255   1.0              5            1

UFO IR2
$I_L1_sw
UFO R2
$R_L1_sw
UFO ER2
$E_L1_sw
UFO QR2
$Q_L1_sw

!
! Line 2, 40 ns, 4 ½ constant impedance
! Line length needs to be better than 2-way 40 ns to prevent reflections from ending up on the 
! the main pulse but negative reflections can shorten the pulse.
!

TRLine EXP 1.0e-09 16 4.0

UFO VIN
$V_L2_in_B
UFO IIN
$I_L2_in_B

TRLine LIN   17.0e-09   4.0 4.0
TRLine EXP 1.0e-09      4.0 16

UFO VOUT
$V_L2_out
UFO IOUT
$I_L2_out
UFO POUT
$P_L2_out
UFO EOUT
$E_L2_out

!
! L2 water switches
! 7 output switches, 0.5"Ó gap + switch inductance
!

RLSeries 10e9 5e-9
Var R2 Switch
!dielectric switchtime gap         pressure   nswitch  nchannels
H2O          329e-09     0.0127   1.0              7            1

UFO IR2
$I_OTL_sw
UFO R2
$R_OTL_sw
UFO ER2
$E_OTL_sw
UFO QR2
$Q_OTL_sw

!
! OTL, 50 ns, 4 ½ constant impedance
!

TRLine EXP 1.0e-09 16 4.0

UFO VIN
$V_OTL_in
UFO IIN
$I_OTL_in

TRLine LIN   66.0e-09    4.0 4.0

UFO VOUT
$V_OTL_out
UFO IOUT
$I_OTL_out
UFO POUT
$P_OTL_out
UFO EOUT
$E_OTL_out

!
! Output resistor - 4 ½ matched
!

RCGround 4 0.00
UFO VR1
$V_Load

!! End Main Branch (Branch #1)!