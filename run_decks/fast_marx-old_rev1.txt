Fast Marx Model
!
! Rick Spielman 2017-02-08
!
Time-step 2.0e-12
Resolution-time 0.2e-9
End-time 1.0e-6
Number-prints 5
Execute-cycles all
Grids no
Echo-setup no
Max-points 5001
!
!Start circuit definition
!
! Rev 1 Fast Marx switch losses
! Marx to 30 stages of 300 nF/stage
!
! Gas switch dimensions from drawings
!
! We start with a total Marx capacitance of 10 nF.
!
! The sub Marx capacitance is 10 nF at a charge voltage of 100 kV.
! We have a 10-nF sub Marx with 30 cap pairs in series and 15 switches. Vch = 3 MV
! Include 130 m½ indivudual cap ESR or 65 m½ per pair of caps in parallel
!   X 30 stages = 1.95 ½ per Marx
! Assume that there will be 200 nH every two stages. L = 200 nH * 15 = 3.0 µH.
!
! The matched impedance of a single Marx = sqrt(L/C) = 17.3 ½.
! The ESR amounts to ~ 11.3% of the matched impedance.
!
! The switch model will have 15x the length of one switch per Fast Marx .
! 
! We will use a total inductance of 300+100+160 nH for the Marx and L1. This inductance is needed to 
! get the required rise time of the voltage on the CPL.
!
! 
!
BRANCH
!
! Capacitor capacitance and charge voltage
!
RCGround 1e+12 10e-9
Initial VC1 3.0e6
UFO VC1
$V_marx
UFO EC1
$E_marx
!
! Cap inductance, case & parasitic inductance, and ESR
! ESR = 0.195 for a single Marx 
!
RLSeries 1.95 2500e-9
!
! Switch resistance - Martin Model and switch inductance - the total gap for a single
!   switch from DWGs is 0.53Ó (1.346 cm) gap and 93 psig air X15 = 20.19 cm
!
! Initial switch resistance was chosen to be higher than that printed in the first
! few time steps so as to appear monotonically decreasing in R plots
! A careful few runs showed that 10 G½ looked best. In any event by 1 ns all of the 
! resistance values are the same.
!
RLSeries 10e9 500e-9
Var R2 Switch
!dielectric switchtime gap        pressure     nswitch  nchannels
AIR            0.0              0.2019   7.3              1              1
UFO IR2
$I_marx
UFO R2
$R_switch
UFO ER2
$E_switch
UFO QR2
$Q_switch
!
! Output Marx header inducatance
!
RLSeries 0.00 100e-9
!
! Line 1 (TC), 40 ns, 4 ½
!
TRLine LIN 40e-09 4 4
UFO VIN
$V_TC_in
UFO VOUT
$V_TC_out
UFO IOUT
$I_TC_out
UFO POUT
$P_TC_out
UFO EOUT
$E_TC_out
!
! Output water switch 2 cm gap - should be water
!
RLSeries 10e9 46e-9
Var R2 Switch
!dielectric switchtime gap      pressure   nswitch  nchannels
SF6           355e-09     0.02     9.0             1             1
UFO IR2
$I_TC_sw
UFO R2
$R_TC_sw
UFO ER2
$E_TC_sw
UFO QR2
$Q_TC_sw
!
!
! Output Line (OL), 95 ns, 4 ½
!
TRLine LIN 60e-09 4 4
UFO VIN
$V_OL_in
UFO VOUT
$V_OL_out
UFO IOUT
$I_OL_out
UFO POUT
$P_OL_out
UFO EOUT
$E_OL_out
!
! insulator stack
!
RLSeries 0.0 10e-9
!
!Vacuum feed
!
RLSeries 0.0 200e-9
UFO EL2
$E_Load_L
!
!Load
!
RCGround 0.0 0.0
UFO IR1
$I_load
UFO VR1
$V_load
UFO PR1
$P_load
UFO ER1
$E_load
!
! End circuit
!