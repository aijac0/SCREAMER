Saturn Fast Marx Test Bed
!
! Rick Spielman 2018-10-20
!
Time-step 4.0e-12
Resolution-time 100e-12
End-time 1.0e-6
Number-prints 5
Execute-cycles all
Grids no
Echo-setup no
Max-points 5001
!
!Start circuit definition
!
!Saturn_FM_rev4b.txt is based on Saturn_FM_rev3b.txt. We are using the exact old Saturn
! L1 dimensions and using only 1 sub-Marx.
!
! Gas switch dimensions from drawings
!
! We have a sub Marx with 40 cap pairs in series and 20 switches. Vch = 3.4 MV
! Each cap pair is 2, 145 nF caps in parallel - 290 nF. Sub-Marx capacitance - 7.25 nF
! 
! Include 130 m½ individual cap ESR or 65 m½ per pair of caps in parallel
!   X 40 stages per sub-Marx = 2.6 ½ per sub-Marx
!
! Assume that there will be 167 nH every stage. The sub-Marx L = 167 nH * 20 = 3.34 µH.
! The total switch inductance is assumed to be 400 nH/sub-Marx. (20 nH per stage) seem low
!
! Energy per sub-Marx at +/-85kV kV = 41.9 kJ
!
! The matched impedance of a sub-Marx = sqrt(L/C) = 21.46 ½.
!   Note, the L1 impedance is 2 ½.
!   The ESR amounts to ~ 12% of the matched impedance.
!
! The switch model will have 20x the length of one switch per sub Marx and then will
! have 2 arc channels (2 sub Marxes) in parallel. 
! 
! We will assume a TOTAL inductance of 1.77 µH (1.67 µH + 0.1 µH)for one Marx and one L1.
! This inductance is needed to get the required rise time of the voltage on the CPL.
!
! L1 capacitance used is 9.15 ns/2 ½ = 4.6 nF (C = t/Z )
!
! 
! Main Branch - Branch #1
!
BRANCH
!
! Marx capacitance and charge voltage
! one sub-Marx (7.25 nF each)
! +/-85 kV charge
!
RCGround 1e+12 7.25e-9
Initial VC1 3.4e6

UFO VC1
$V_marx
UFO EC1
$E_marx

!
! Cap inductance, case & parasitic inductance, and ESR
! ESR = 2.6 ½ per sub Marx, L from above is 3.34e-6 H - 400 nF = 2940 nF
!

RLSeries 2.6 2.94e-6

!
! Switch resistance - Martin Model and switch inductance - the total gap for both sides of a single
!   switch from DWGs is 0.53Ó (1.3462 cm) gap @ 93 psig air X20 = 26.924 cm
!
! Switch inductance of one sub-Marx from above = 400 nH
! 

RLSeries 10e9 400e-9
Var R2 Switch
!dielectric switchtime gap          pressure     nswitch  nchannels
AIR           0.0               0.26924  7.3                1             1

UFO IR2
$I_marx
UFO R2
$R_switch
UFO ER2
$E_switch
UFO QR2
$Q_switch

!
! Output Marx header inductance 100 nH not parallelled (WAG)
! I am reducing this to 75 nH for rev4
!

RLSeries 0.00 75e-9

!
! Line 1 , 9.14 ns, 2 ½; 9 ns/2= 4.5 nF
! Include the 1.75" radius transition of the L1, 2.275 ½
!

TRLine EXP 1.33e-09   2.275  2.0
TRLine LIN   6.48e-09   2.0      2.0
TRLine EXP 1.33e-09   2.0      2.275

UFO VOUT
$V_L1_out
UFO IOUT
$I_L1_out
UFO EOUT
$E_L1_out
UFO POUT
$P_L1_out

!
! Impedance of the L1 output boss not included
! L1 water switches
! 10 output switches, 2.75Ó Saturn gap + switch inductance
! Est. switch inductance for 10 switches, 6.985 cm long is 8.8 nH
!

RLSeries 10e9 10e-9
Var R2 Switch
!dielectric switchtime gap         pressure   nswitch  nchannels
H2O          310e-09     0.06985   1.0              10            1

UFO IR2
$I_L1_sw
UFO R2
$R_L1_sw
UFO ER2
$E_L1_sw
UFO QR2
$Q_L1_sw

!
! Line 2, 20 ns, 2 ½ constant impedance
! Line length needs to be the same as L1 to double bounce the pulse.
! boss edge impedance 2XL1 or 2x2.275 ½ = 4.55 ½
!

TRLine EXP 1.33e-09 4.55 4.0

UFO VIN
$V_L2_in
UFO IIN
$I_L2_in

TRLine LIN   6.48e-09      4.0 4.0
TRLine EXP 1.33e-09      4.0 4.55

UFO VOUT
$V_L2_out
UFO IOUT
$I_L2_out
UFO POUT
$P_L2_out
UFO EOUT
$E_L2_out

!
! L2 water switches
! 10 output switches, 0.5"Ó gap + switch inductance
! Est. arc inductance for 10 switches, 1.27 cm long, 0.38 ns is 1.59 nH (check 4 ½!!)
!

RLSeries 10e9 5e-9
Var R2 Switch
!dielectric switchtime gap         pressure   nswitch  nchannels
H2O          325.5e-09     0.0127   1.0              10            1

UFO IR2
$I_L2_sw
UFO R2
$R_L2_sw
UFO ER2
$E_L2_sw
UFO QR2
$Q_L2_sw

!
! OTL, 77.33 ns, 4 ½ constant impedance with L2 transitions
!

TRLine EXP 1.33e-09 4.55 4.0

UFO VIN
$V_OTL_in
UFO IIN
$I_OTL_in

TRLine LIN   76.0e-09    4.0 4.0

UFO VOUT
$V_OTL_out
UFO IOUT
$I_OTL_out
UFO POUT
$P_OTL_out
UFO EOUT
$E_OTL_out

!
! Output resistor - 4 ½ matched
!

RCGround 4 0.00
UFO VR1
$V_Load

!! End Main Branch (Branch #1)!