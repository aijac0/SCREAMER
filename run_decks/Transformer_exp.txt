DE-R Single Module Model
!
! Rick Spielman 2017-06-08
!
Time-step 2.0e-12
Resolution-time 0.2e-9
End-time 1.0e-6
Number-prints 5
Execute-cycles all
Grids no
Echo-setup no
Max-points 5001
!
!Start circuit definition
!
! This deck is based on the DE-R_rev1a deck. We will be comparing the efficiency of a linear transformer in the OTL to an exponential transformer.
!
! DE-R Rev 1 uses the DE Rev 4 as the baseline. We will be changing all the line impedances to
! 2 ½ and will be changing the line lengths. The goal here is to have a driver that delivers a clean 100-ns FWHM pulse to a constant impedance load.
!
! Rev 4 changes the CPL water switch gap to the actual gap 3.75Ó
! also changes the output line to constant 1.3 ½ impedance with a matched load.
!
! Rev 3 Marx switch losses and more accurate water line parameters
! Change marx to 30 stages of 300 nF/stage
!
! Gas switch dimensions from drawings
!
! We start with a total Marx capacitance of 100 nF (exceeds the CPL capacitance). This implies
!   that there will a ringing gain on the CPL. This allows a faster rise time than otherwise to 
!   get to the desired CPL voltage.
!
! CPL capacitance used is 60 nF. This is distributed in a TL that is 85 ns long and
!   has a constant impedance of 1.4 ½. (C = t/Z = 85/1.4 nF = 60.71 nF)
!
! The sub Marx capacitance is 10 nF at a charge voltage of 100 kV.
! We have a 10-nF sub Marx with 30 cap pairs in series and 15 switches. Vch = 3 MV
! We have 10 sub Marxes in parallel.
! the total Marx capacitance is 100 nF.
! Include 130 m½ individual cap ESR or 65 m½ per pair of caps in parallel
!   X 30 stages = 1.95 ½ per sub-Marx
! Assume that there will be 200 nH every two stages. L = 200 nH * 15 = 3.0 µH.
!   The total Marx inductance (caps and switches) would be 3.0 µH/10 = 300 nH
!
! The matched impedance of a single Marx = sqrt(L/C) = 17.3 ½.
!   The total Marx impedance is 17.3 ½/10 = 1.73 ½
! Note CPL impedance is 1.4 ½. (12 sub-marxes would match)
! The ESR amounts to ~ 11.3% of the matched impedance.
!
! The switch model will have 15x the length of one switch per sub Marx and then will
! have 10 arc channels (sub Marxes) in parallel.
! 
! We will use a total inductance of 380 nH for the Marx and L1. This inductance is needed to 
! get the required rise time of the voltage on the CPL.
!
! 
!
BRANCH
!
! Capacitor capacitance and charge voltage
!
RCGround 1e+12 100e-9
Initial VC1 3.0e6
UFO VC1
$V_marx
UFO EC1
$E_marx
!
! Cap inductance, case & parasitic inductance, and ESR
! ESR = 0.195 for the total Marx (1.95 ½/10)
!
RLSeries 0.195 250e-9
!
! Switch resistance - Martin Model and switch inductance - the total gap for a single
!   switch from DWGs is 0.53Ó (1.346 cm) gap and 93 psig air X15 = 20.19 cm
!
! Initial switch resistance was chosen to be higher than that printed in the first
! few time steps so as to appear monotonically decreasing in R plots
! A careful few runs showed that 10 G½ looked best. In any event by 1 ns all of the 
! resistance values are the same.
!
RLSeries 10e9 50e-9
Var R2 Switch
!dielectric switchtime gap        pressure     nswitch  nchannels
AIR           0.0               0.2019  7.3                10           1
UFO IR2
$I_marx
UFO R2
$R_switch
UFO ER2
$E_switch
UFO QR2
$Q_switch
!
! Output Marx header inductance
!
RLSeries 0.00 100e-9
!
! Line 1 (CPL), 50 ns, 2 ½
!
TRLine LIN 50e-09 2 2
UFO VOUT
$V_CPL_out
UFO IOUT
$I_CPL_out
UFO EOUT
$E_CPL_out
UFO POUT
$P_CPL_out
UFO EOUT
$E_CPL_out
!
! CPL water switches
! 5 output switches, 4Ó gap + switch inductance
!
RLSeries 10e9 10e-9
Var R2 Switch
!dielectric switchtime gap         pressure   nswitch  nchannels
H2O         270e-09     0.1016   1.0              5             1
UFO IR2
$I_CPL_sw
UFO R2
$R_CPL_sw
UFO ER2
$E_CPL_sw
UFO QR2
$Q_CPL_sw
!
! Line 2, 72 ns, 2 ½ constant impedance
!
TRLine LIN 72e-09 2 2
UFO VIN
$V_PFL_in
UFO VOUT
$V_PFL_out
UFO IOUT
$I_PFL_out
UFO POUT
$P_PFL_out
UFO EOUT
$E_PFL_out
!
! Line 2 water switches
! 7 output switches, 0.5Ó gap + switch inductance
!
RLSeries 10e9 10e-9
Var R2 Switch
!dielectric switchtime gap      pressure     nswitch  nchannels
H2O         360e-09    0.0127   1.0                    7               1
UFO IR2
$I_PFL_sw
UFO R2
$R_PFL_sw
UFO ER2
$E_PFL_sw
UFO QR2
$Q_PFL_sw
!
! Output Line (OL),  72 ns, 2 ½ - 1.5 ½ transformer
!
TRLine EXP 72e-09 2.0 1.0
UFO VIN
$V_OL_in
UFO VOUT
$V_OL_out
UFO IOUT
$I_OL_out
UFO POUT
$P_OL_out
UFO EOUT
$E_OL_out
!
! Load resistance - Designed to match the output impedance of the OL.
!
RCGround 1.0 0.0
UFO IR1
$I_load
UFO VR1
$V_load
UFO PR1
$P_load
UFO ER1
$E_load
!
! End circuit
!